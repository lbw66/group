<!DOCTYPE html>
<html lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>jquery实现div拖拽</title>
<script src="./jquery-3.3.1.js" type="text/javascript"></script>
<style type="text/css">
*{margin:0;padding:0}
    #moveBar {
    position: absolute;
    width: 200px;
    height: 400px;
    background: black;
    color:white;
    border: solid 1px #000;
    }
    #banner {
    background: #ddd;
    cursor: move;
    }
</style>
</head>
<body>
    <div id="moveBar">
        <div id="banner">按住鼠标移动当前div</div>
        <div id="content">内容部分</div>
    </div>
<script>
    $(function () {
        dragPanelMove("#banner","#moveBar");

        function dragPanelMove(downDiv,moveDiv){
            $(downDiv).mousedown(function (e) {
                    var isMove = true;
                    // 获取鼠标点击 downDiv 时鼠标距离 downDiv 左上角的坐标
                    // e.pageX,e.pageY 获取鼠标当前坐标
                    var div_x = e.pageX - $(moveDiv).offset().left;
                    var div_y = e.pageY - $(moveDiv).offset().top;
                    console.log(div_x,div_y);
                    $(document).mousemove(function (e) {
                        if (isMove) {
                            var obj = $(moveDiv);
                            // e.pageX,e.pageY 获取鼠标当前坐标
                            console.log(e.pageX,e.pageY);
                            // 将鼠标当前位置赋值给要移动的盒子 作为top and left
                            obj.css({"left":e.pageX - div_x, "top":e.pageY - div_y});
                        }
                    }).mouseup(
                        function () {
                        isMove = false;
                    });
            });

        }

    });
</script>
</body>
</html> 
